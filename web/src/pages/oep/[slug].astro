---
// Prerender at build time (SSG)
export const prerender = true;

import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';
import Header from '../../components/Header.astro';
import Footer from '../../components/Footer.astro';
import OEPArticle from '../../components/OEPArticle.astro';

export async function getStaticPaths() {
  const oeps = await getCollection('oeps');
  return oeps.map((oep) => ({
    params: { slug: oep.id },
    props: { oep },
  }));
}

const { oep } = Astro.props;
---

<Layout title={`OEP-${String(oep.data.oep).padStart(4, '0')}: ${oep.data.title}`}>
  <Header />
  <OEPArticle
    oep={oep.data.oep}
    title={oep.data.title}
    type={oep.data.type}
    status={oep.data.status}
    labels={oep.data.labels}
    authors={oep.data.authors}
    created={oep.data.created}
    body={oep.data.body}
    discussion={oep.data.discussion}
  />
  <Footer />
</Layout>
